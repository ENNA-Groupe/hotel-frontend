{"version":3,"sources":["src/app/pages/private/consommations/consommations.page.html","src/app/pages/private/consommations/consommations.module.ts","src/app/pages/private/consommations/consommations.page.scss","src/app/pages/private/consommations/consommations.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-content>\\n  <ion-grid fixed>\\n    <ion-row>\\n      <ion-col *ngFor=\\\"let table of tables\\\" size=\\\"12\\\">\\n        <ion-card mode=\\\"ios\\\" >\\n          <ion-card-header>\\n            <ion-card-title>Table N {{table.numero}}  <ion-badge color=\\\"secondary\\\" mode=\\\"ios\\\">4200 FCFA</ion-badge></ion-card-title>\\n          </ion-card-header>\\n          <ion-card-content>\\n            <ion-list>\\n              <ion-item *ngFor=\\\"let conso of consommations\\\">\\n                <ion-label>{{conso.nom}}</ion-label>\\n                <div slot=\\\"end\\\">\\n                  <ion-badge  color=\\\"secondary\\\" mode=\\\"ios\\\">{{conso.quantite}}</ion-badge>\\n                  <ion-button (click)=\\\"onClick()\\\">\\n                    <ion-icon slot=\\\"icon-only\\\" name=\\\"onAddConso(table.id, table.numero, conso.id)\\\"></ion-icon>\\n                  </ion-button>\\n                </div>\\n               \\n              </ion-item>\\n            </ion-list>\\n            <p>Aucune consommation</p>\\n            <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\">\\n              <ion-fab-button color=\\\"success\\\" (click)=\\\"endConso(table.id, table.numero, conso.id)\\\">\\n                <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n              </ion-fab-button>\\n            </ion-fab>\\n            <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n              <ion-fab-button (click)=\\\"onAddConso(table.id, table.numero)\\\">\\n                <ion-icon name=\\\"add\\\"></ion-icon>\\n              </ion-fab-button>\\n            </ion-fab>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n\\n    </ion-row>\\n  </ion-grid>\\n \\n   \\n  <ion-fab  *ngIf=\\\"!trash\\\"  vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button (click)=\\\"onAddTable()\\\">\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConsommationsPage } from './consommations.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConsommationsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ConsommationsPage]\n})\nexport class ConsommationsPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ByaXZhdGUvY29uc29tbWF0aW9ucy9jb25zb21tYXRpb25zLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Table } from 'src/app/models/table.model';\nimport { Consommation } from 'src/app/models/consommation.model';\nimport { PopoverController, ModalController } from '@ionic/angular';\nimport { ConsommationService } from 'src/app/services/consommation.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { TableFormComponent } from 'src/app/components/table-form/table-form.component';\nimport { TableProfilComponent } from 'src/app/components/table-profil/table-profil.component';\nimport { ConsommationFormComponent } from 'src/app/components/consommation-form/consommation-form.component';\n\n@Component({\n  selector: 'app-consommations',\n  templateUrl: './consommations.page.html',\n  styleUrls: ['./consommations.page.scss'],\n})\nexport class ConsommationsPage implements OnInit {\n\n tableSubscription: Subscription;\n tables: Table[];\n tableTrashSubscription: Subscription;\n tablesTrash: Table[];\n\n  consommationSubscription: Subscription;\n  consommations: Consommation[];\n\n  trash:boolean = false;\n\n  constructor(\n    private popoverController: PopoverController,\n    private consommationService: ConsommationService,\n    private modalController: ModalController,\n    private data: DataService,\n  ) { }\n\n  ngOnInit() {\n    this.tableSubscription =  this.consommationService.getTables().subscribe(\n      (res: Table[]) => {\n        this.tables = res;\n      }\n    );\n    this.consommationSubscription =  this.consommationService.getConsommations().subscribe(\n      (res: Consommation[]) => {\n        this.consommations = res;\n      }\n    );\n    this.tableTrashSubscription =  this.consommationService.getTablesTrash().subscribe(\n      (res: Table[]) => {\n        this.tablesTrash = res;\n      }\n    );\n  }\n\n  ngOnDestroy(){\n    this.tableSubscription.unsubscribe();\n    this.consommationSubscription.unsubscribe();\n    this.tableTrashSubscription.unsubscribe();\n  }\n\n  async onAddTable() {\n    const popover = await this.popoverController.create({\n      component: TableFormComponent,\n      translucent: false\n    });\n  \n    popover.onDidDismiss().then(\n      (res) => {\n        console.log(res.data);\n        if (res.data) this.consommationService.addTable(res.data);\n      }\n    )\n    await popover.present();\n  }\n\n  async onEditTable(id) {\n    const popover = await this.popoverController.create({\n      component: TableFormComponent,\n      translucent: false,\n      componentProps: {\n        id: id\n      }\n    });\n  \n    popover.onDidDismiss().then(\n      (res) => {\n        if (res.data) this.consommationService.editTable(res.data);\n      }\n    )\n    await popover.present();\n  }\n\n  async onShowTable(id) {\n    const popover = await this.popoverController.create({\n      component: TableProfilComponent,\n      translucent: false,\n      componentProps: {\n        id: id,\n        trash: this.trash\n      }\n    });\n    await popover.present();\n  }\n\n  onDeleteTable(id: number){\n    this.consommationService.deleteTable(id);\n  }\n\n  onRestoreTable(id: number){\n    this.consommationService.restoreTable(id);\n  }\n\n  \n  async onAddConso(tableId: number, numeroTable: number, consoId?: number) {\n    if(!consoId){\n      const modal = await this.modalController.create({\n        component: ConsommationFormComponent,\n        componentProps: {\n          numeroTable: numeroTable\n        }\n      });\n    \n      modal.onDidDismiss().then(\n        (res) => {\n          console.log(res.data);\n          \n          if (res.data) {\n            res.data.consommation.tableId=tableId;\n            res.data.consommation.factureTotale = res.data.produits.reduce((a,b)=>{\n              a +(b.prixUnitaireVente*b.quantite);\n            },0);\n            this.consommationService.addConsommation(res.data);\n          }\n        }\n      )\n      await modal.present();\n    } else{\n      let conso = this.consommationService.getConsommation(consoId);\n      this.consommationService.addConsommation(conso);\n    }\n    \n  }\n\n onEditConsommation(id) {\n    \n  }\n\n  onShowConsommation(id) {\n  }\n  \n  onDeleteConsommation(id: number){\n   if(window.confirm('Voulez vous vraiment supprimer ce Consommation?')) this.consommationService.deleteConsommation(id);\n  }\n\n  onRestoreConsommation(id: number){\n    this.consommationService.restoreConsommation(id);\n  }\n\n}"],"sourceRoot":"webpack:///","file":"consommations-consommations-module-es5.js"}